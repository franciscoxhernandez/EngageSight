<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>EngageSight ‚Äì Video Upload</title>
  <link rel="stylesheet" href="../static/main.css">
</head>
<body>
  <div class="container">
    <div class="card">
      <h2><span class="logo">üé•</span> EngageSight</h2>
      <hr class="divider">

      <p class="description">
        <strong>EngageSight</strong> is an AI tool hosted on <strong>AWS EC2</strong> that uses <strong>AWS Rekognition</strong>
        to analyse participants‚Äô engagement levels during online meetings.<br><br>
        This AI is part of the PhD research of <strong>Francisco Hernandez</strong>.
        It works by comparing facial expressions to a predefined model. <strong>NO</strong> facial tracking or audio analysis is performed.
        Faces are never uploaded; only visual features are compared locally.<br><br>
        ‚ö†Ô∏è <strong>Usage recommendations:</strong><br>
        ‚Ä¢ Maximum 10 participants per video.<br>
        ‚Ä¢ Each participant must have a unique name.<br>
        ‚Ä¢ Engagement is estimated from attention, speaking frequency, mood, and camera focus.<br>
        ‚Ä¢ Usage of only one screen is recommended.<br><br>
        After processing, you can download the results and a CSV file from <strong>DynamoDB</strong>.
        You can also choose to divide your video into 5 s, 10 s, 20 s, 30 s, or 60 s segments.
      </p>

      <hr class="divider">

      <h3>Upload Your Video</h3>
      <div class="drop_box">
        <header><h4>Select a Video File</h4></header>
        <p>Supported formats: MP4, MOV, AVI</p>

        <form action="/upload" method="post" enctype="multipart/form-data" id="uploadForm">
          <input type="file" name="file" id="fileID" accept=".mp4,.mov,.avi" hidden>
          <button type="button" class="btn" id="chooseBtn">Choose File</button>
          <label for="interval" class="label">Divide video into segments of:</label>
          <select name="interval" id="interval" class="dropdown">
            <option value="5">Every 5 seconds</option>
            <option value="10" selected>Every 10 seconds</option>
            <option value="20">Every 20 seconds</option>
            <option value="30">Every 30 seconds</option>
            <option value="60">Every 60 seconds</option>
          </select>
          <br><br>
          <button type="submit" class="btn" style="background-color:green;">Upload & Process</button>
        </form>

        <!-- üëá Loading screen -->
        <div id="loading-screen" class="loading" style="display:none;">
          <div class="spinner"></div>
          <p>Processing your video... please wait ‚è≥</p>
        </div>

        <!-- üëá Results section -->
        <div id="results" class="results" style="display:none;">
          <h4>‚úÖ Processing complete!</h4>
          <p>You can download your results below:</p>
        </div>
      </div>

      <hr class="divider">

      <h3>Download Results</h3>
      <div class="drop_box">
        <button class="btn" onclick="loadAnnotatedImages()">üì∏ View Annotated Images</button>
        <br><br>
        <button class="btn" onclick="window.location.href='/download_csv'">üìä Download Participant CSV</button>

        <!-- üëá Annotated Image Gallery -->
        <div id="gallery" class="gallery" style="display:none;">
          <h4>üì∏ Annotated Results</h4>
          <div id="imageGrid" class="image-grid"></div>
        </div>
      </div>
    </div> <!-- closes .card -->
  </div> <!-- closes .container -->

  <script src="{{ url_for('static', filename='main.js') }}"></script>
</body>
</html>


